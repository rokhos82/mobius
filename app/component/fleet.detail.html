<page-title title="Fleet Detail" message="This is the fleet detail for the fleet {{$ctrl.fleet.name}} of the {{$ctrl.fleet.faction}}.  Here you can change general fleet infomration and add/remove units to the fleet."></page-title>
<page-alerts alerts="$ctrl.alerts"></page-alerts>
<div class="row">
	<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
		<div class="panel panel-default">
			<div class="panel-heading">
				<label class="pull-right btn btn-success" ng-click="$ctrl.onSave()">Save</label>
				<h4 class="mobius-title text-info">Fleet Information</h4>
			</div>
			<div class="panel-body">
				<div class="form-horizontal">
					<div class="form-group">
						<label for="fleetName" class="col-lg-2 control-label">Name</label>
						<div class="col-lg-10">
							<input type="text" id="fleetName" class="form-control" ng-model="$ctrl.fleet.name" />
						</div>
					</div>
					<div class="form-group">
						<label for="fleetFaction" class="col-lg-2 control-label">Faction</label>
						<div class="col-lg-10">
							<input type="text" id="fleetFaction" class="form-control" ng-model="$ctrl.fleet.faction" />
						</div>
					</div>
					<div class="form-group">
						<label for="fleetBreakoff" class="col-lg-2 control-label">Breakoff</label>
						<div class="col-lg-10">
							<input type="number" id="fleetBreakoff" class="form-control" ng-model="$ctrl.fleet.breakoff" />
						</div>
					</div>
					<div class="form-group">
						<label class="col-lg-2 control-label">Add Unit</label>
						<div class="col-lg-5">
							<select class="form-control" ng-model="$ctrl.add.unit" ng-options="unit.uuid as unit.general.name for unit in $ctrl.getAllUnits()"></select>
						</div>
						<label class="col-lg-1 control-label">Count</label>
						<div class="col-lg-2">
							<input type="number" class="form-control" ng-model="$ctrl.add.count" />
						</div>
						<div class="col-lg-2">
							<button class="btn btn-info form-control" ng-click="$ctrl.onAddUnit()">Add Unit</button>
						</div>
					</div>
				</div>
			</div>
			<table class="table table-striped table-hover">
				<thead>
					<tr><th class="col-md-3">Unit</th><th class="col-md-2">Template</th><th class="col-md-1">Type</th><th class="col-md-1">Size</th><th class="col-md-1">Hull</th><th class="col-md-1">Shield</th><th class="col-md-1">Firepower</th><th class="col-md-1">Cost</th><th class="col-md-1"></th></tr>
				</thead>
				<tbody>
					<tr ng-repeat="unit in $ctrl.fleet.units" class="mobius-fleet-table"><td class="mobius-cell-control"><input type="text" class="form-control mobius-control-sm" ng-model="unit.general.name" /></td><td>{{$ctrl.getTemplate(unit.template)}}</td><td>{{unit.general.type}}</td><td>{{unit.general.size}}</td><td>{{unit.hull.current}}/{{unit.hull.max}}</td><td>{{unit.shield.current}}/{{unit.shield.max}}</td><td>{{unit.general.firepower}}</td><td>{{unit.general.cost}}</td><td><button class="btn btn-danger btn-sm" ng-click="$ctrl.onDeleteUnit(unit.uuid)">Delete</button></td></tr>
				</tbody>
			</table>
			<div class="panel-body">
				{{$ctrl.fleet}}
			</div>
			<div class="panel-footer">
				{{$ctrl.fleet.uuid}}
			</div>
		</div>
	</div>
</div>