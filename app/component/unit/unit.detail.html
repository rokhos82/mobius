<page-title title="Unit Detail" message="Welcome to the unit details for {{$ctrl.unit.general.name}}."></page-title>
<page-alerts alerts="$ctrl.alerts"></page-alerts>
<div class="row">
	<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
		<div class="panel panel-default">
			<div class="panel-body">
				<form class="form-horizontal mobius-left-lg mobius-right-lg">
					<div class="form-group">
						<div class="input-group">
							<span class="input-group-addon">Section</span>
							<input type="text" class="form-control" placeholder="Name" ng-model="sectionName" />
							<span class="input-group-btn">
								<button type="submit" class="btn btn-success" ng-click="$ctrl.addSection(sectionName); sectionName='';">Add</button>
							</span>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
	<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" ng-repeat="(title,section) in $ctrl.sectionFilter()">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="mobius-title-sm text-info">Section: {{title}}</h3>
			</div>
			<div class="panel-body">
				<div class="form-horizontal mobius-left-lg mobius-right-lg">
					<div class="form-group">
						<div class="input-group">
							<span class="input-group-addon">Attribute</span>
							<input type="text" class="form-control" placeholder="Name" ng-model="attrName" />
							<span class="input-group-btn">
								<button class="btn btn-success" ng-click="$ctrl.addAttribute(title,attrName); attrName='';">Add</button>
							</span>
						</div>
					</div>
					<div class="form-group">
						<button class="btn btn-danger form-control" ng-click="$ctrl.removeSection(title)">Remove Section</button>
					</div>
				</div>
			</div>
			<table class="table table-striped table-hover">
				<thead>
					<tr><th class="col-md-1">Attribute</th><th class="col-md-10">Value</th><th></th></tr>
				</thead>
				<tbody>
					<tr class="mobius-table-row" ng-repeat="(attr,val) in section"><td class="mobius-attr-cell text-capitalize">{{attr}}</td><td class="mobius-tight-cell"><input type="text" class="form-control mobius-table-control" ng-model="section[attr]" /></td><td class="mobius-tight-cell mobius-right-sm"><button class="btn btn-danger mobius-table-button" ng-click="$ctrl.removeAttribute(title,attr)">Remove</button></td></tr>
				</tbody>
			</table>
			<div class="panel-footer"></div>
		</div>
	</div>
	<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" ng-if="$ctrl.hasDirectFire()">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="mobius-title-sm text-info">Section: direct-fire</h3>
			</div>
			<div class="panel-body">
				<form class="form-horizontal mobius-left-lg mobius-right-lg">
					<div class="form-group">
						<button class="btn btn-primary form-control" ng-click="$ctrl.addDirectFireGroup()">Add Weapon Group</button>
					</div>
				</form>
				<div class="panel panel-default" ng-repeat="(groupIndex,group) in $ctrl.directFireGroups()">
					<table class="table table-stripe table-hover">
						<thead>
							<tr><th class="col-md-1">Attribute</th><th class="col-md-10">Value</th><th></th></tr>
						</thead>
						<tbody>
							<tr class="mobius-table-row" ng-repeat="(attr,val) in group"><td class="mobius-attr-cell text-capitalize">{{attr}}</td><td class="mobius-tight-cell"><input type="text" class="form-control mobius-table-control" ng-model="group[attr]" /></td><td class="mobius-tight-cell mobius-right-sm"><button class="btn btn-danger mobius-table-button" ng-click="$ctrl.removeDirectFireAttribute(groupIndex,attr)">Remove</button></td></tr>
						</tbody>
					</table>
				</div>
			</div>
			<div class="panel-footer"></div>
		</div>
	</div>
</div>